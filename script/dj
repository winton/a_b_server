#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'

Bundler.require(:dj)

tmp = File.expand_path(File.dirname(__FILE__) + '/../') + "/tmp"

puts with_pid(
  :action => ARGV[0], # start or stop
  :command => File.expand_path(File.dirname(__FILE__)) + "/runner 'Delayed::Worker.new.start'",
  :name => "dj",
  :pid => tmp + "/dj.pid",
  :tmp => tmp
)